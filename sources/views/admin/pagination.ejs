<div class="d-flex justify-content-center">
    <nav aria-label="Page navigation example justify-content-center">
        <ul class="pagination">
            <% var i=(Number(page)> 3 ? Number(page) - 2 : 1) %>
                <% if(i !==1) { %>
                    <li class="page-item">
                        <a class="page-link" href="?<%=query+'&'%>page=1">1</a>
                    </li>
                    <li class="page-item disabled">
                        <a class="page-link" href="#">...</a>
                    </li>
                    <% } %>
                        <% for(; i <=(Number(page) + 2) && i <=Math.ceil(Number(total)/pageSize); i++) { %>
                            <% if(i==page) { %>
                                <li class="page-item active">
                                    <a class="page-link" href="?<%=query+'&'%>page=<%=i%>">
                                        <%= i %>
                                    </a>
                                </li>
                                <% } else { %>
                                    <li class="page-item">
                                        <a class="page-link" href="?<%=query+'&'%>page=<%=i%> ">
                                            <%= i %>
                                        </a>
                                    </li>
                                    <% } %>
                                        <% if (i==Number(page) + 2 && i < Math.ceil(Number(total)/pageSize)) { %>
                                            <li class="page-item disabled">
                                                <a class="page-link" href="#">...</a>
                                            </li>

                                            <li class="page-item <% if (Math.ceil(Number(total) /pageSize) == page) {%>
                                                active
                                                <% } %> ">
                                                <a class="page-link" href="?<%=query+'&'%>page=<%= Math.ceil(Number(total)/pageSize)%> ">
                                                    <%=Math.ceil(Number(total) /pageSize)%>
                                                </a>
                                            </li>
                                            <% } %>
                                                <% } %>
        </ul>
    </nav>
</div>